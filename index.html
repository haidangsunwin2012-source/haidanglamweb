<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>HYPER JUMP - Vượt Ngục Gai</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
    body{
        margin:0;
        background:linear-gradient(#050a3a,#000);
        color:#fff;
        font-family:Arial,Helvetica,sans-serif;
        text-align:center;
        user-select:none;
    }
    h1{margin:10px 0;color:#00ffff;text-shadow:0 0 10px #00ffff;}
    h2{margin:0;color:red;}
    #gameBox{
        margin:10px auto;
        border:3px solid #00ffff;
        box-shadow:0 0 15px #00ffff;
        background:#000;
    }
    #jumpBtn{
        margin:15px auto;
        padding:14px 30px;
        font-size:20px;
        border:none;
        border-radius:30px;
        background:#00eaff;
        color:#000;
        font-weight:bold;
        box-shadow:0 0 10px #00eaff;
    }
    #over{
        position:absolute;
        top:0;left:0;
        width:100%;height:100%;
        background:rgba(0,0,0,0.7);
        display:none;
        align-items:center;
        justify-content:center;
        flex-direction:column;
        z-index:10;
    }
    #over h1{color:red;}
    #over button{
        padding:10px 20px;
        font-size:16px;
    }
</style>
</head>

<body>
<h1>HYPER JUMP</h1>
<h2>VƯỢT NGỤC GAI</h2>
<p>GAME DO HẢI ĐĂNG TẠO</p>
<p>⭐ Điểm: <span id="score">0</span></p>

<div style="position:relative;width:360px;margin:auto">
    <canvas id="gameBox" width="360" height="200"></canvas>
    <div id="over">
        <h1>GAME OVER</h1>
        <button onclick="restart()">Chơi lại</button>
    </div>
</div>

<button id="jumpBtn">⬆ NHẢY</button>

<script>
const canvas = document.getElementById("gameBox");
const ctx = canvas.getContext("2d");

const dinoImg = new Image();
dinoImg.src = "dino.png";

const cactusImg = new Image();
cactusImg.src = "cactus.png";

let groundY = 160;
let gravity = 0.7;
let speed = 12; // chạy nhanh x2

let dino = {
    x: 40,
    y: groundY,
    w: 40,
    h: 40,
    vy: 0,
    jumping:false
};

let spikes = [];
let frame = 0;
let score = 0;
let alive = true;

function addSpike(){
    let count = Math.random()<0.25 ? 2 : 1; // thỉnh thoảng 2 gai
    for(let i=0;i<count;i++){
        spikes.push({
            x: canvas.width + i*35,
            w: 28,
            h: 45
        });
    }
}

function jump(){
    if(!dino.jumping && alive){
        dino.vy = -12;
        dino.jumping = true;
    }
}

document.getElementById("jumpBtn").onclick = jump;
document.addEventListener("keydown",e=>{
    if(e.code==="Space") jump();
});

function update(){
    if(!alive) return;

    frame++;
    ctx.clearRect(0,0,canvas.width,canvas.height);

    // ground
    ctx.fillStyle="#444";
    ctx.fillRect(0,groundY+dino.h,canvas.width,4);

    // dino
    dino.vy += gravity;
    dino.y += dino.vy;
    if(dino.y >= groundY){
        dino.y = groundY;
        dino.vy = 0;
        dino.jumping=false;
    }
    ctx.drawImage(dinoImg,dino.x,dino.y,dino.w,dino.h);

    // spikes
    if(frame%50===0) addSpike();

    for(let i=spikes.length-1;i>=0;i--){
        let s = spikes[i];
        s.x -= speed;
        ctx.drawImage(cactusImg,s.x,groundY-s.h,s.w,s.h);

        // collision
        if(
            dino.x < s.x+s.w &&
            dino.x+dino.w > s.x &&
            dino.y+dino.h > groundY-s.h
        ){
            gameOver();
        }

        if(s.x+s.w<0){
            spikes.splice(i,1);
            score++;
            document.getElementById("score").innerText=score;
        }
    }

    requestAnimationFrame(update);
}

function gameOver(){
    alive=false;
    document.getElementById("over").style.display="flex";
}

function restart(){
    spikes=[];
    score=0;
    frame=0;
    alive=true;
    dino.y=groundY;
    dino.vy=0;
    document.getElementById("score").innerText=0;
    document.getElementById("over").style.display="none";
    update();
}

update();
</script>
</body>
</html>
