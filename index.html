<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>Hyper Jump - Vượt Ngục Gai</title>
<style>
body{
    margin:0;
    background:#0b0b1a;
    color:white;
    text-align:center;
    font-family:Arial;
}
h1{color:#00ffff;text-shadow:0 0 10px #00ffff;margin:10px 0 0}
h2{color:red;margin:5px 0}
.creator{color:#ccc;font-size:14px;margin-bottom:10px}
canvas{
    background:#111;
    border:3px solid #00ffff;
    box-shadow:0 0 20px #00ffff;
}
.gameover{
    position:absolute;
    top:50%;
    left:50%;
    transform:translate(-50%,-50%);
    color:red;
    font-size:28px;
    display:none;
}
</style>
</head>

<body>
<h1>HYPER JUMP</h1>
<h2>VƯỢT NGỤC GAI</h2>
<div class="creator">GAME DO HAI DANG TẠO</div>

<canvas id="game" width="420" height="260"></canvas>
<div id="over" class="gameover">GAME OVER<br>Chạm để chơi lại</div>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");
const over = document.getElementById("over");

// ====== MẶT ĐẤT ======
const groundY = 215;

// ====== ẢNH KHỦNG LONG ======
const dinoImg = new Image();
dinoImg.src = "dino.png";

// ====== BIẾN GAME ======
let dino, spikes, running;

function init(){
    dino = {
        x: 50,
        w: 44,
        h: 47,
        y: groundY - 47, // CHÂN CHẠM ĐẤT
        vy: 0
    };
    spikes = [];
    running = true;
    over.style.display = "none";
}

function spawnSpike(){
    if(spikes.length > 0){
        let last = spikes[spikes.length - 1];
        if(canvas.width - last.x < 150) return;
    }
    spikes.push({
        x: canvas.width,
        w: 20,
        h: 30,
        y: groundY - 30
    });
}

function update(){
    if(!running) return;
    ctx.clearRect(0,0,canvas.width,canvas.height);

    // trọng lực
    dino.vy += 0.7;
    dino.y += dino.vy;
    if(dino.y > groundY - dino.h){
        dino.y = groundY - dino.h;
        dino.vy = 0;
    }

    // vẽ khủng long
    ctx.drawImage(dinoImg, dino.x, dino.y, dino.w, dino.h);

    // vẽ gai
    ctx.fillStyle = "red";
    for(let s of spikes){
        s.x -= 4;

        ctx.beginPath();
        ctx.moveTo(s.x, s.y + s.h);
        ctx.lineTo(s.x + s.w / 2, s.y);
        ctx.lineTo(s.x + s.w, s.y + s.h);
        ctx.closePath();
        ctx.fill();

        // va chạm
        if(
            dino.x < s.x + s.w &&
            dino.x + dino.w > s.x &&
            dino.y < s.y + s.h &&
            dino.y + dino.h > s.y
        ){
            gameOver();
        }
    }
    spikes = spikes.filter(s => s.x + s.w > 0);

    // vẽ mặt đất
    ctx.strokeStyle = "#00ffff";
    ctx.beginPath();
    ctx.moveTo(0, groundY);
    ctx.lineTo(canvas.width, groundY);
    ctx.stroke();
}

function jump(){
    if(dino.y >= groundY - dino.h){
        dino.vy = -12;
    }
}

function gameOver(){
    running = false;
    over.style.display = "block";
}

canvas.addEventListener("click",()=>{
    if(!running) init();
    else jump();
});
document.addEventListener("keydown",e=>{
    if(e.code === "Space") jump();
});

init();
setInterval(update,20);
setInterval(spawnSpike,1400);
</script>
</body>
</html>
