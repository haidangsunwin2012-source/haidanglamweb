<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>Hyper Jump: V∆∞·ª£t Ng·ª•c Gai</title>

<style>
body{
    margin:0;
    background:linear-gradient(180deg,#020024,#090979,#000);
    color:white;
    font-family:Arial, Helvetica, sans-serif;
    text-align:center;
}

h1{
    margin-top:15px;
    color:#00ffff;
    text-shadow:0 0 15px #00ffff;
}
h2{
    color:#ff0033;
    margin:5px 0;
}
#author{
    font-size:13px;
    opacity:0.8;
}

#score{
    margin-top:8px;
    font-size:18px;
    color:#00ff99;
}

#game{
    width:360px;
    height:220px;
    border:3px solid #00ffff;
    margin:15px auto;
    position:relative;
    overflow:hidden;
    background:#111;
    box-shadow:0 0 25px #00ffff;
}

/* kh·ªßng long */
#dino{
    position:absolute;
    bottom:15px;
    left:40px;
    width:65px;
}

/* gai */
#spike{
    position:absolute;
    bottom:15px;
    right:-40px;
    width:0;
    height:0;
    border-left:20px solid transparent;
    border-right:20px solid transparent;
    border-top:35px solid #ff0033;
    filter:drop-shadow(0 0 8px red);
}

/* nh·∫£y */
.jump{
    animation: jump 0.55s ease;
}

@keyframes jump{
    0%{bottom:15px;}
    50%{bottom:120px;}
    100%{bottom:15px;}
}

#hint{
    font-size:14px;
    opacity:0.85;
    margin-top:5px;
}
</style>
</head>

<body>

<h1>HYPER JUMP</h1>
<h2>V∆Ø·ª¢T NG·ª§C GAI</h2>
<div id="author">GAME DO HAI DANG T·∫†O</div>
<div id="score">‚≠ê ƒêi·ªÉm: 0</div>

<div id="game">
    <img id="dino" src="dino.png">
    <div id="spike"></div>
</div>

<div id="hint">üëâ Ch·∫°m m√†n h√¨nh ho·∫∑c nh·∫•n ph√≠m ƒë·ªÉ nh·∫£y</div>

<script>
const dino = document.getElementById("dino");
const spike = document.getElementById("spike");
const scoreEl = document.getElementById("score");

let score = 0;
let speed = 4;
let gameOver = false;

/* √¢m thanh */
const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
function beep(freq, time){
    const osc = audioCtx.createOscillator();
    const gain = audioCtx.createGain();
    osc.frequency.value = freq;
    osc.type = "square";
    osc.connect(gain);
    gain.connect(audioCtx.destination);
    osc.start();
    gain.gain.exponentialRampToValueAtTime(
        0.0001,
        audioCtx.currentTime + time
    );
}

/* nh·∫£y */
function jump(){
    if(gameOver) return;
    if(!dino.classList.contains("jump")){
        dino.classList.add("jump");
        beep(600,0.15);
        setTimeout(()=>dino.classList.remove("jump"),550);
    }
}

document.addEventListener("keydown", jump);
document.addEventListener("touchstart", jump);

/* v√≤ng l·∫∑p game */
setInterval(()=>{
    if(gameOver) return;

    let spikeLeft = spike.offsetLeft;
    spike.style.left = spikeLeft - speed + "px";

    if(spikeLeft < -40){
        spike.style.left = "360px";
        score++;
        scoreEl.innerText = "‚≠ê ƒêi·ªÉm: " + score;
        beep(900,0.05);

        if(score % 5 === 0){
            speed++;
        }
    }

    let dinoBottom = parseInt(
        window.getComputedStyle(dino).getPropertyValue("bottom")
    );

    if(spikeLeft < 95 && spikeLeft > 40 && dinoBottom < 50){
        gameOver = true;
        beep(150,0.6);
        setTimeout(()=>{
            alert("üíÄ GAME OVER üíÄ\nƒêi·ªÉm c·ªßa b·∫°n: " + score);
            location.reload();
        },200);
    }
},25);
</script>

</body>
</html>
