<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Hyper Jump - Vượt Ngục Gai</title>

<style>
body{
    margin:0;
    font-family:Arial, sans-serif;
    background:linear-gradient(#050b4d,#02042a);
    color:white;
    text-align:center;
}

h1{color:#00ffff;text-shadow:0 0 10px cyan;}
h2{color:red;}
#author{font-size:12px;opacity:0.8;}
#score{margin:8px;font-size:18px;}

canvas{
    background:black;
    border:3px solid cyan;
    box-shadow:0 0 25px cyan;
    width:98%;
    max-width:1200px;
    height:360px;
}

#jumpBtn{
    margin:25px auto;
    padding:15px 40px;
    font-size:20px;
    border:none;
    border-radius:30px;
    background:cyan;
    box-shadow:0 0 20px cyan;
}

.shake{
    animation:shake 0.3s;
}
@keyframes shake{
    0%{transform:translate(0)}
    25%{transform:translate(5px)}
    50%{transform:translate(-5px)}
    75%{transform:translate(5px)}
    100%{transform:translate(0)}
}
</style>
</head>

<body>

<h1>HYPER JUMP</h1>
<h2>VƯỢT NGỤC GAI</h2>
<div id="author">GAME DO HẢI ĐĂNG TẠO</div>
<div id="score">⭐ Điểm: <span id="point">0</span></div>

<canvas id="game" width="1200" height="360"></canvas>

<button id="jumpBtn">⬆ NHẢY</button>

<!-- ÂM THANH -->
<audio id="jumpSound" src="https://assets.mixkit.co/active_storage/sfx/2568/2568-preview.mp3"></audio>
<audio id="dieSound" src="https://assets.mixkit.co/active_storage/sfx/2708/2708-preview.mp3"></audio>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

const groundY = canvas.height - 60;

const dinoImg = new Image();
dinoImg.src = "https://i.imgur.com/7yUVEZd.png"; // ảnh khủng long

let dino = {
    x:80,
    y:groundY - 60,
    w:60,
    h:60,
    vy:0
};

let spike = { x:canvas.width, y:groundY-40, w:30, h:40 };
let gravity = 1;
let jumping = false;
let speed = 7;
let score = 0;
let gameOver = false;

const jumpSound = document.getElementById("jumpSound");
const dieSound = document.getElementById("dieSound");

function drawGround(){
    ctx.fillStyle="#222";
    ctx.fillRect(0, groundY, canvas.width, 5);
}

function drawDino(){
    ctx.drawImage(dinoImg, dino.x, dino.y, dino.w, dino.h);
}

function drawSpike(){
    ctx.fillStyle="red";
    ctx.beginPath();
    ctx.moveTo(spike.x, spike.y + spike.h);
    ctx.lineTo(spike.x + spike.w/2, spike.y);
    ctx.lineTo(spike.x + spike.w, spike.y + spike.h);
    ctx.fill();
}

function update(){
    if(gameOver) return;
    ctx.clearRect(0,0,canvas.width,canvas.height);

    dino.y += dino.vy;
    dino.vy += gravity;

    if(dino.y >= groundY - dino.h){
        dino.y = groundY - dino.h;
        dino.vy = 0;
        jumping = false;
    }

    spike.x -= speed;
    if(spike.x < -spike.w){
        spike.x = canvas.width + 300;
        score++;
        point.innerText = score;
    }

    if(
        dino.x < spike.x + spike.w &&
        dino.x + dino.w > spike.x &&
        dino.y < spike.y + spike.h &&
        dino.y + dino.h > spike.y
    ){
        endGame();
    }

    drawGround();
    drawDino();
    drawSpike();
    requestAnimationFrame(update);
}

function jump(){
    if(!jumping && !gameOver){
        dino.vy = -17;
        jumping = true;
        jumpSound.currentTime = 0;
        jumpSound.play();
    }
}

function endGame(){
    gameOver = true;
    dieSound.play();
    canvas.classList.add("shake");

    setTimeout(()=>{
        ctx.fillStyle="rgba(0,0,0,0.7)";
        ctx.fillRect(0,0,canvas.width,canvas.height);
        ctx.fillStyle="red";
        ctx.font="40px Arial";
        ctx.fillText("GAME OVER", canvas.width/2-130, canvas.height/2-20);
        ctx.fillStyle="white";
        ctx.font="22px Arial";
        ctx.fillText("Chơi lại", canvas.width/2-35, canvas.height/2+20);
        canvas.onclick = ()=>location.reload();
    },300);
}

jumpBtn.onclick = jump;
document.addEventListener("keydown",e=>{ if(e.code==="Space") jump(); });

dinoImg.onload = update;
</script>

</body>
</html>
