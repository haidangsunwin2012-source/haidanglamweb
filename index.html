<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>HYPER JUMP - V∆∞·ª£t Ng·ª•c Gai</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
    body{
        margin:0;
        background:linear-gradient(#050a3a,#000);
        color:#fff;
        font-family:Arial;
        text-align:center;
        user-select:none;
    }
    h1{margin:10px 0;color:#00ffff;text-shadow:0 0 10px #00ffff;}
    h2{margin:0;color:red;}
    #gameBox{
        margin:10px auto;
        border:3px solid #00ffff;
        background:#000;
        box-shadow:0 0 15px #00ffff;
    }
    #jumpBtn{
        margin:15px auto;
        padding:14px 30px;
        font-size:20px;
        border:none;
        border-radius:30px;
        background:#00eaff;
        font-weight:bold;
    }
    #over{
        position:absolute;
        inset:0;
        background:rgba(0,0,0,.7);
        display:none;
        align-items:center;
        justify-content:center;
        flex-direction:column;
    }
</style>
</head>

<body>
<h1>HYPER JUMP</h1>
<h2>V∆Ø·ª¢T NG·ª§C GAI</h2>
<p>GAME DO H·∫¢I ƒêƒÇNG T·∫†O</p>
<p>‚≠ê ƒêi·ªÉm: <span id="score">0</span></p>

<div style="position:relative;width:360px;margin:auto">
    <canvas id="gameBox" width="360" height="200"></canvas>
    <div id="over">
        <h1>GAME OVER</h1>
        <button onclick="restart()">Ch∆°i l·∫°i</button>
    </div>
</div>

<button id="jumpBtn">‚¨Ü NH·∫¢Y</button>

<script>
const canvas = document.getElementById("gameBox");
const ctx = canvas.getContext("2d");

const dinoImg = new Image();
dinoImg.src = "dino.png";

const cactusImg = new Image();
cactusImg.src = "cactus.png";

const ground = 170;

let speed = 8; // üîΩ gi·∫£m t·ªëc ƒë·ªô
let gravity = 0.7;

let dino = {
    x: 40,
    w: 55,   // ü¶ñ to h∆°n x∆∞∆°ng r·ªìng
    h: 55,
    y: ground - 55,
    vy: 0,
    jump:false
};

let spikes = [];
let score = 0;
let frame = 0;
let alive = true;

function addSpike(){
    let count = Math.random() < 0.3 ? 2 : 1;
    for(let i=0;i<count;i++){
        spikes.push({
            x: canvas.width + i*40,
            w: 30,
            h: 45
        });
    }
}

function jump(){
    if(!dino.jump && alive){
        dino.vy = -12;
        dino.jump = true;
    }
}
document.getElementById("jumpBtn").onclick = jump;
document.addEventListener("keydown",e=>{
    if(e.code==="Space") jump();
});

function update(){
    if(!alive) return;
    frame++;
    ctx.clearRect(0,0,canvas.width,canvas.height);

    // ground
    ctx.fillStyle="#444";
    ctx.fillRect(0,ground,canvas.width,4);

    // dino
    dino.vy += gravity;
    dino.y += dino.vy;
    if(dino.y >= ground - dino.h){
        dino.y = ground - dino.h;
        dino.vy = 0;
        dino.jump = false;
    }
    ctx.drawImage(dinoImg,dino.x,dino.y,dino.w,dino.h);

    // spikes
    if(frame % 45 === 0) addSpike();

    for(let i=spikes.length-1;i>=0;i--){
        let s = spikes[i];
        s.x -= speed;
        ctx.drawImage(
            cactusImg,
            s.x,
            ground - s.h,
            s.w,
            s.h
        );

        // collision
        if(
            dino.x < s.x+s.w &&
            dino.x+dino.w > s.x &&
            dino.y+dino.h > ground-s.h
        ){
            gameOver();
        }

        if(s.x+s.w < 0){
            spikes.splice(i,1);
            score++;
            document.getElementById("score").innerText = score;
        }
    }

    requestAnimationFrame(update);
}

function gameOver(){
    alive=false;
    document.getElementById("over").style.display="flex";
}

function restart(){
    spikes=[];
    score=0;
    frame=0;
    alive=true;
    dino.y = ground - dino.h;
    dino.vy = 0;
    document.getElementById("score").innerText=0;
    document.getElementById("over").style.display="none";
    update();
}

update();
</script>
</body>
</html>
